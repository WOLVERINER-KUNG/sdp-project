<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Civic Interaction Portal - DEMO</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    .login-page { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; align-items: center; justify-content: center; }
    .container { width: 100%; max-width: 500px; background: white; padding: 40px; border-radius: 10px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }
    h1 { color: #333; margin-bottom: 10px; text-align: center; }
    p { text-align: center; color: #666; margin-bottom: 30px; }
    .form-group { margin-bottom: 20px; }
    label { display: block; margin-bottom: 8px; color: #333; font-weight: 600; }
    input, select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px; }
    .btn { width: 100%; padding: 12px; background: #667eea; color: white; border: none; border-radius: 5px; font-size: 16px; font-weight: 600; cursor: pointer; }
    .btn:hover { background: #5568d3; }
    .dashboard { background: #f5f5f5; min-height: 100vh; }
    .navbar { background: #667eea; color: white; padding: 20px; display: flex; justify-content: space-between; align-items: center; }
    .navbar h2 { margin: 0; }
    .navbar-user { display: flex; gap: 15px; align-items: center; }
    .btn-logout { background: #764ba2; padding: 8px 16px; font-size: 14px; width: auto; }
    .content { padding: 30px; max-width: 1200px; margin: 0 auto; }
    .role-badge { display: inline-block; background: #667eea; color: white; padding: 5px 12px; border-radius: 20px; font-size: 12px; margin-bottom: 20px; }
    .issues-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin: 20px 0; }
    .issue-card { background: white; border: 1px solid #e0e0e0; padding: 20px; border-radius: 8px; }
    .issue-card h3 { color: #333; margin-bottom: 10px; }
    .issue-card p { text-align: left; color: #666; font-size: 14px; margin-bottom: 10px; }
    .meta { display: flex; justify-content: space-between; font-size: 12px; color: #999; }
    .status-new { color: #4CAF50; font-weight: 600; }
    .status-in-review { color: #FF9800; font-weight: 600; }
    .status-resolved { color: #2196F3; font-weight: 600; }
    textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; min-height: 100px; resize: vertical; }
    .stats { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 20px 0; }
    .stat-box { background: white; padding: 20px; border-radius: 8px; text-align: center; }
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    th, td { padding: 10px; border: 1px solid #ddd; text-align: left; }
    th { background: #f5f5f5; }
    .success-msg { color: #4CAF50; padding: 10px; background: #e8f5e9; border-radius: 5px; margin-bottom: 15px; }
  </style>
</head>
<body id="app"></body>
<script>
  const app = document.getElementById('app');
  let currentUser = { role: '', name: '' };
  
  // Load issues from localStorage
  function loadIssues() {
    const stored = localStorage.getItem('civicIssues');
    return stored ? JSON.parse(stored) : [];
  }
  
  // Save issues to localStorage
  function saveIssues(issues) {
    localStorage.setItem('civicIssues', JSON.stringify(issues));
  }
  
  // Submit a new issue
  function submitIssue() {
    const titleInput = document.getElementById('issueTitle');
    const descInput = document.getElementById('issueDesc');
    const title = titleInput.value.trim();
    const description = descInput.value.trim();
    
    if (!title || !description) {
      alert('Please fill in both title and description');
      return;
    }
    
    const issues = loadIssues();
    const newIssue = {
      id: Date.now(),
      title: title,
      description: description,
      reportedBy: currentUser.name,
      status: 'New',
      createdAt: new Date().toLocaleString(),
      response: ''
    };
    
    issues.push(newIssue);
    saveIssues(issues);
    
    // Clear form
    titleInput.value = '';
    descInput.value = '';
    
    // Show success message
    alert('Issue submitted successfully!');
    
    // Refresh dashboard
    showDashboard();
  }
  
  function showLogin() {
    app.innerHTML = `
    <div class="login-page">
    <div class="container">
    <h1>üèõÔ∏è Civic Interaction Portal</h1>
    <p>Connecting Citizens with Democratic Processes</p>
    <div class="form-group">
    <label>Email</label>
    <input type="email" id="email" placeholder="Enter your email">
    </div>
    <div class="form-group">
    <label>Password</label>
    <input type="password" id="password" placeholder="Enter your password">
    </div>
    <div class="form-group">
    <label>Role</label>
    <select id="role">
    <option value="">Select your role</option>
    <option value="citizen">Citizen</option>
    <option value="politician">Politician</option>
    <option value="moderator">Moderator</option>
    <option value="admin">Admin</option>
    </select>
    </div>
    <button class="btn" onclick="login()">Sign In</button>
    </div>
    </div>`;
  }
  
  function login() {
    const email = document.getElementById('email').value;
    const role = document.getElementById('role').value;
    if (!email || !role) { alert('Please fill in all fields'); return; }
    if (!email.includes('@')) { alert('Email must contain @ symbol (e.g., user@gmail.com)'); return; }
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) { alert('Please enter a valid email address (e.g., user@gmail.com)'); return; }
    currentUser = { role, name: email.split('@')[0] };
    showDashboard();
  }
  
  function showDashboard() {
    document.body.className = 'dashboard';
    const issues = loadIssues();
    let content = '';
    
    if (currentUser.role === 'citizen') {
      const userIssues = issues.filter(i => i.reportedBy === currentUser.name);
      content = `<div class="navbar"><h2>üèõÔ∏è Citizen Dashboard</h2><div class="navbar-user"><span>Welcome, ${currentUser.name}</span><button class="btn btn-logout" onclick="logout()">Logout</button></div></div>
      <div class="content"><div class="role-badge">Role: CITIZEN</div><h2>Report a Civic Issue</h2><div class="form-group"><label>Issue Title</label><input type="text" id="issueTitle" placeholder="e.g., Pothole on Main Street"></div><div class="form-group"><label>Description</label><textarea id="issueDesc" placeholder="Describe the issue..."></textarea></div><button class="btn" onclick="submitIssue()">Submit Issue</button><h2 style="margin-top: 30px;">My Issues</h2><div class="issues-grid">`;
      
      if (userIssues.length === 0) {
        content += '<p>No issues reported yet.</p>';
      } else {
        userIssues.forEach(issue => {
          content += `<div class="issue-card"><h3>${issue.title}</h3><p>${issue.description}</p><div class="meta"><span class="status-${issue.status.toLowerCase().replace(' ', '-')}">${issue.status}</span><span>${issue.createdAt}</span></div></div>`;
        });
      }
      content += '</div></div>';
    } else if (currentUser.role === 'politician') {
      content = `<div class="navbar"><h2>üèõÔ∏è Politician Dashboard</h2><div class="navbar-user"><span>Welcome, Rep. ${currentUser.name}</span><button class="btn btn-logout" onclick="logout()">Logout</button></div></div>
      <div class="content"><div class="role-badge">Role: POLITICIAN</div><h2>Constituent Issues</h2><div class="issues-grid">`;
      
      if (issues.length === 0) {
        content += '<p>No issues to review.</p>';
      } else {
        issues.forEach(issue => {
          content += `<div class="issue-card"><h3>${issue.title}</h3><p>${issue.description}</p><p><strong>Reported by:</strong> ${issue.reportedBy}</p><div class="meta"><span class="status-${issue.status.toLowerCase().replace(' ', '-')}">${issue.status}</span><span>${issue.createdAt}</span></div></div>`;
        });
      }
      content += '</div></div>';
    } else if (currentUser.role === 'moderator') {
      content = `<div class="navbar"><h2>üèõÔ∏è Moderator Dashboard</h2><div class="navbar-user"><span>Welcome, ${currentUser.name}</span><button class="btn btn-logout" onclick="logout()">Logout</button></div></div>
      <div class="content"><div class="role-badge">Role: MODERATOR</div><h2>Content Moderation</h2><p>Total Issues: ${issues.length}</p><div class="issues-grid">`;
      
      if (issues.length === 0) {
        content += '<p>No issues to moderate.</p>';
      } else {
        issues.forEach(issue => {
          content += `<div class="issue-card"><h3>${issue.title}</h3><p>${issue.description}</p><p><strong>Reported by:</strong> ${issue.reportedBy}</p><div class="meta"><span class="status-${issue.status.toLowerCase().replace(' ', '-')}">${issue.status}</span><span>${issue.createdAt}</span></div></div>`;
        });
      }
      content += '</div></div>';
    } else if (currentUser.role === 'admin') {
      const newCount = issues.filter(i => i.status === 'New').length;
      const resolvedCount = issues.filter(i => i.status === 'Resolved').length;
      content = `<div class="navbar"><h2>üèõÔ∏è Admin Dashboard</h2><div class="navbar-user"><span>Welcome, Admin ${currentUser.name}</span><button class="btn btn-logout" onclick="logout()">Logout</button></div></div>
      <div class="content"><div class="role-badge">Role: ADMIN</div><h2>System Administration</h2><div class="stats"><div class="stat-box"><h3>${issues.length}</h3><p>Total Issues</p></div><div class="stat-box"><h3>${newCount}</h3><p>New Issues</p></div><div class="stat-box"><h3>${resolvedCount}</h3><p>Resolved</p></div></div><h2>All Submitted Issues</h2><div class="issues-grid">`;
      
      if (issues.length === 0) {
        content += '<p>No issues in the system.</p>';
      } else {
        issues.forEach(issue => {
          content += `<div class="issue-card"><h3>${issue.title}</h3><p>${issue.description}</p><p><strong>Reported by:</strong> ${issue.reportedBy}</p><div class="meta"><span class="status-${issue.status.toLowerCase().replace(' ', '-')}">${issue.status}</span><span>${issue.createdAt}</span></div></div>`;
        });
      }
      content += '</div></div>';
    }
    
    app.innerHTML = content;
  }
  
  function logout() { showLogin(); }
  
  showLogin();
</script>
</html>
